<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Closure with Crunky</title>
</head>
<body style="background-color: #313131;">

    <!-- 
    
    Closures means a function can containing another innerfunction inside it, and with the help of lexical scope, the inner function can access the properties of the outer function even after it is executes and vanishes is all about closures . 
     
    closures can be nested in a hierarchy of three or more levels
    
    -->

    <button id="green">Green</button>
    <button id="orange">Orange</button>

    
</body>
<script>

    // function init() {
    //     let name = "Mozilla"; 
    //     function displayName() {
    //         console.log(name); 
    //     }
    //     displayName();
    // }
    // init();

     // function outer(){
    //     let username = "hitesh"
    //     console.log("OUTER", secret);
    //     function inner(){
    //         let secret = "my123"
    //         console.log("inner", username);
    //     }
    //     function innerTwo(){
    //         console.log("innerTwo", username);
    //         console.log(secret);
    //     }
    //     inner()
    //     innerTwo()
    // }
    // outer()
    // console.log("TOO OUTER", username);


    function makeFunc() {
        const name = "Mozilla";
        function displayName() {
            console.log(name);
        }
        return displayName; 
    }

    // returns all lexical scope when retruning fucntion 



</script>
<script>
    // document.getElementById('green').onclick = () => {
    //     document.body.style.backgroundColor = 'green'
    // }

    // document.getElementById('orange').onclick = () => {
    //     document.body.style.backgroundColor = 'orange'
    // }


    function clickHandler(color){
        // document.body.style.backgroundColor = `${color}`

        // closure basic real use case
        return function(){

            document.body.style.backgroundColor = `${color}`
        }
    }


    document.getElementById('green').onclick = clickHandler('green')
    document.getElementById('orange').onclick = clickHandler('orange')


    // If you didn't use a closure 

    /*

            function clickHandler(color) {
        document.body.style.backgroundColor = `${color}`
        }

        document.getElementById('green').onclick = clickHandler('green')
        document.getElementById('orange').onclick = clickHandler('orange')


    In this case, the clickHandler function would be called immediately when assigning the onclick event, and the background color would be set to 'orange' for both elements. This is because the clickHandler function is called immediately, and the color variable is not preserved.

    By using a closure, you ensure that each element's onclick event is associated with a unique function that "remembers" the correct color.
    */


</script>
</html>